{
  "meta": {
    "name": "postflop-srp-initiative-v2",
    "version": "1.2.0",
    "notes": "Single Raised Pot con iniciativa. Ramas IP y OOP. Reglas determinísticas (sin MIX). Turn por boardType alineado a estrategia."
  },
  "rulesets": {
    "IP": {
      "FLOP": [
        {
          "id": "IP_F_OF_SECO",
          "priority": 10,
          "when": { "eq": ["boardType", "OFENSIVO_SECO"] },
          "do": {
            "action": "BET",
            "size": 33,
            "plan": "CBET_RANGE",
            "reason": "Ofensivo seco: cbet chico todo el rango"
          }
        },

        {
          "id": "IP_F_OF_COORD_VALUE_DRAW",
          "priority": 20,
          "when": {
            "all": [
              { "eq": ["boardType", "OFENSIVO_COORD"] },
              {
                "any": [
                  { "in": ["handTier", ["MUY_FUERTE", "FUERTE"]] },
                  { "gte": ["outs", 4] }
                ]
              }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "CBET_POLAR",
            "reason": "Ofensivo coordinado: 75% con valor y/o semifarol (4+ outs)"
          }
        },
        {
          "id": "IP_F_OF_COORD_CHECK",
          "priority": 21,
          "when": { "eq": ["boardType", "OFENSIVO_COORD"] },
          "do": {
            "action": "CHECK",
            "plan": "CHECK_BACK",
            "reason": "Ofensivo coordinado: check con medias/aire sin equity"
          }
        },

        {
          "id": "IP_F_DEF_SECO_VALUE_DRAW",
          "priority": 30,
          "when": {
            "all": [
              { "eq": ["boardType", "DEFENSIVO_SECO"] },
              {
                "any": [
                  { "in": ["handTier", ["MUY_FUERTE", "FUERTE"]] },
                  { "gte": ["outs", 5] }
                ]
              }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "CBET_VALUE",
            "reason": "Defensivo seco: 75% con fuertes + semifarol (5+ outs)"
          }
        },
        {
          "id": "IP_F_DEF_SECO_CHECK",
          "priority": 31,
          "when": { "eq": ["boardType", "DEFENSIVO_SECO"] },
          "do": {
            "action": "CHECK",
            "plan": "CHECK_BACK",
            "reason": "Defensivo seco: check con medias/aire"
          }
        },

        {
          "id": "IP_F_DEF_COORD_VALUE_DRAW",
          "priority": 40,
          "when": {
            "all": [
              { "eq": ["boardType", "DEFENSIVO_COORD"] },
              {
                "any": [
                  { "in": ["handTier", ["MUY_FUERTE", "FUERTE"]] },
                  { "gte": ["outs", 8] }
                ]
              }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "CBET_VALUE",
            "reason": "Defensivo coordinado: 75% con fuertes + semifarol (8+ outs)"
          }
        },
        {
          "id": "IP_F_DEF_COORD_CHECK",
          "priority": 41,
          "when": { "eq": ["boardType", "DEFENSIVO_COORD"] },
          "do": {
            "action": "CHECK",
            "plan": "CHECK_BACK",
            "reason": "Defensivo coordinado: check con medias/aire"
          }
        },

        {
          "id": "IP_F_NEU_SECO",
          "priority": 50,
          "when": { "eq": ["boardType", "NEUTRO_SECO"] },
          "do": {
            "action": "BET",
            "size": 50,
            "plan": "CBET_RANGE",
            "reason": "Neutro seco: bet 50% todo el rango"
          }
        },

        {
          "id": "IP_F_NEU_COORD_VALUE_DRAW",
          "priority": 60,
          "when": {
            "all": [
              { "eq": ["boardType", "NEUTRO_COORD"] },
              {
                "any": [
                  { "in": ["handTier", ["MUY_FUERTE", "FUERTE"]] },
                  { "gte": ["outs", 8] }
                ]
              }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "CBET_POLAR",
            "reason": "Neutro coordinado: 75% con valor o 8+ outs"
          }
        },
        {
          "id": "IP_F_NEU_COORD_CHECK",
          "priority": 61,
          "when": { "eq": ["boardType", "NEUTRO_COORD"] },
          "do": {
            "action": "CHECK",
            "plan": "CHECK_BACK",
            "reason": "Neutro coordinado: check con medias/aire"
          }
        },

        {
          "id": "IP_F_PAIRED_OF",
          "priority": 70,
          "when": { "eq": ["boardType", "PAREADO_OFENSIVO"] },
          "do": {
            "action": "BET",
            "size": 33,
            "plan": "CBET_RANGE",
            "reason": "Pareado ofensivo: bet chico rango"
          }
        },

        {
          "id": "IP_F_PAIRED_DEF_VS_BAD",
          "priority": 71,
          "when": {
            "all": [
              { "eq": ["boardType", "PAREADO_DEFENSIVO"] },
              { "eq": ["villainProfile", "BAD"] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 33,
            "plan": "CBET_RANGE",
            "reason": "Pareado defensivo vs malo: bet chico rango"
          }
        },
        {
          "id": "IP_F_PAIRED_DEF_VS_GOOD_STRONG",
          "priority": 72,
          "when": {
            "all": [
              { "eq": ["boardType", "PAREADO_DEFENSIVO"] },
              { "eq": ["villainProfile", "GOOD"] },
              {
                "any": [
                  { "in": ["handTier", ["MUY_FUERTE", "FUERTE"]] },
                  { "eq": ["handTier", "AIRE"] },
                  { "gte": ["outs", 8] }
                ]
              }
            ]
          },
          "do": {
            "action": "BET",
            "size": 33,
            "plan": "CBET_VALUE",
            "reason": "Pareado defensivo vs bueno: bet chico con fuertes, aire o semifarol 8+ outs"
          }
        },
        {
          "id": "IP_F_PAIRED_DEF_VS_GOOD_CHECK",
          "priority": 73,
          "when": {
            "all": [
              { "eq": ["boardType", "PAREADO_DEFENSIVO"] },
              { "eq": ["villainProfile", "GOOD"] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CHECK_BACK",
            "reason": "Pareado defensivo vs bueno: check con medias/SD"
          }
        },

        {
          "id": "IP_F_PAIRED_NEU",
          "priority": 74,
          "when": { "eq": ["boardType", "PAREADO_NEUTRO"] },
          "do": {
            "action": "BET",
            "size": 50,
            "plan": "CBET_RANGE",
            "reason": "Pareado neutro: bet 50% rango"
          }
        },

        {
          "id": "IP_F_MONO",
          "priority": 80,
          "when": { "eq": ["boardType", "MONOCOLOR"] },
          "do": {
            "action": "BET",
            "size": 33,
            "plan": "CBET_RANGE",
            "reason": "Monocolor: bet 33% todo el rango"
          }
        },

        {
          "id": "IP_F_FALLBACK",
          "priority": 999,
          "when": {},
          "do": { "action": "CHECK", "plan": "NONE", "reason": "Fallback" }
        }
      ],

      "TURN": [
        {
          "id": "IP_T_OF_COORD_DELAYED_CBET_ANY",
          "priority": 5,
          "when": {
            "all": [
              { "eq": ["boardType", "OFENSIVO_COORD"] },
              { "eq": ["flopAction", "CHECK"] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "DELAYED_CBET",
            "reason": "Ofensivo coordinado: doble check flop -> podemos apostar cualquier turn"
          }
        },
        {
          "id": "IP_T_OF_COORD_DYNAMIC_VALUE_COMPLETED",
          "priority": 10,
          "when": {
            "all": [
              { "eq": ["boardType", "OFENSIVO_COORD"] },
              { "in": ["turnDynamic", ["AGGRESSOR", "DEFENDER"]] },
              { "eq": ["flopAction", "BET"] },
              { "eq": ["heroCompletedDraw", true] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "VALUE",
            "reason": "Ofensivo coordinado dinámico: completamos draw -> value"
          }
        },
        {
          "id": "IP_T_OF_COORD_DYNAMIC_BOARD_COMPLETED_CHECK",
          "priority": 11,
          "when": {
            "all": [
              { "eq": ["boardType", "OFENSIVO_COORD"] },
              { "in": ["turnDynamic", ["AGGRESSOR", "DEFENDER"]] },
              { "eq": ["flopAction", "BET"] },
              { "eq": ["boardCompletedDraw", true] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Ofensivo coordinado dinámico: se completa draw del board -> check"
          }
        },
        {
          "id": "IP_T_OF_COORD_STATIC_VALUE_OR_DRAW",
          "priority": 12,
          "when": {
            "all": [
              { "eq": ["boardType", "OFENSIVO_COORD"] },
              { "eq": ["turnDynamic", "STATIC"] },
              { "eq": ["flopAction", "BET"] },
              {
                "any": [
                  { "in": ["handTier", ["MUY_FUERTE", "FUERTE"]] },
                  { "gte": ["outs", 4] }
                ]
              }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "BARREL",
            "reason": "Ofensivo coordinado estático: continuar con valor/proyectos"
          }
        },
        {
          "id": "IP_T_OF_COORD_STATIC_CHECK",
          "priority": 13,
          "when": {
            "all": [
              { "eq": ["boardType", "OFENSIVO_COORD"] },
              { "eq": ["turnDynamic", "STATIC"] },
              { "eq": ["flopAction", "BET"] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Ofensivo coordinado estático: check con lo que no continúa"
          }
        },

        {
          "id": "IP_T_OF_SECO_STATIC_BET",
          "priority": 20,
          "when": {
            "all": [
              { "eq": ["boardType", "OFENSIVO_SECO"] },
              { "eq": ["turnDynamic", "STATIC"] },
              { "in": ["handTier", ["MUY_FUERTE", "FUERTE", "AIRE"]] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "PRESSURE",
            "reason": "Ofensivo seco estático: bet grande con fuertes, semibluff y aire"
          }
        },
        {
          "id": "IP_T_OF_SECO_STATIC_CHECK",
          "priority": 21,
          "when": {
            "all": [
              { "eq": ["boardType", "OFENSIVO_SECO"] },
              { "eq": ["turnDynamic", "STATIC"] },
              { "eq": ["handTier", "MEDIA"] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Ofensivo seco estático: check con manos medias/SD"
          }
        },
        {
          "id": "IP_T_OF_SECO_DYNAMIC_BET",
          "priority": 22,
          "when": {
            "all": [
              { "eq": ["boardType", "OFENSIVO_SECO"] },
              { "in": ["turnDynamic", ["AGGRESSOR", "DEFENDER"]] },
              {
                "any": [
                  { "in": ["handTier", ["MUY_FUERTE", "FUERTE"]] },
                  { "gte": ["outs", 4] }
                ]
              }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "PRESSURE",
            "reason": "Ofensivo seco dinámico: bet grande con fuertes o semifarol (4+ outs)"
          }
        },
        {
          "id": "IP_T_OF_SECO_DYNAMIC_CHECK",
          "priority": 23,
          "when": {
            "all": [
              { "eq": ["boardType", "OFENSIVO_SECO"] },
              { "in": ["turnDynamic", ["AGGRESSOR", "DEFENDER"]] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Ofensivo seco dinámico: check con medias/SD/aire"
          }
        },

        {
          "id": "IP_T_DEF_STATIC_BET",
          "priority": 30,
          "when": {
            "all": [
              { "in": ["boardType", ["DEFENSIVO_SECO", "DEFENSIVO_COORD"]] },
              { "eq": ["turnDynamic", "STATIC"] },
              { "eq": ["flopAction", "BET"] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "BARREL",
            "reason": "Defensivo estático: seguir con todo lo que beteó flop"
          }
        },
        {
          "id": "IP_T_DEF_STATIC_CHECK",
          "priority": 31,
          "when": {
            "all": [
              { "in": ["boardType", ["DEFENSIVO_SECO", "DEFENSIVO_COORD"]] },
              { "eq": ["turnDynamic", "STATIC"] },
              { "eq": ["flopAction", "CHECK"] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Defensivo estático: mantener check con lo que chequeó flop"
          }
        },
        {
          "id": "IP_T_DEF_DYNAMIC_AGGRESSOR",
          "priority": 32,
          "when": {
            "all": [
              { "in": ["boardType", ["DEFENSIVO_SECO", "DEFENSIVO_COORD"]] },
              { "eq": ["turnDynamic", "AGGRESSOR"] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "PRESSURE",
            "reason": "Defensivo dinámico: atacar si favorece al agresor"
          }
        },
        {
          "id": "IP_T_DEF_DYNAMIC_DEFENDER",
          "priority": 33,
          "when": {
            "all": [
              { "in": ["boardType", ["DEFENSIVO_SECO", "DEFENSIVO_COORD"]] },
              { "eq": ["turnDynamic", "DEFENDER"] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Defensivo dinámico: pasar si favorece al defensor"
          }
        },

        {
          "id": "IP_T_NEU_SECO_STATIC_STRONG_OR_DRAW",
          "priority": 40,
          "when": {
            "all": [
              { "eq": ["boardType", "NEUTRO_SECO"] },
              { "eq": ["turnDynamic", "STATIC"] },
              {
                "any": [
                  { "eq": ["handTier", "FUERTE"] },
                  { "gte": ["outs", 4] }
                ]
              }
            ]
          },
          "do": {
            "action": "BET",
            "size": 50,
            "plan": "THIN_VALUE_OR_SEMI",
            "reason": "Neutro seco estático: bet 50% con fuerte o semifarol (4+ outs)"
          }
        },
        {
          "id": "IP_T_NEU_SECO_STATIC_CHECK",
          "priority": 41,
          "when": {
            "all": [
              { "eq": ["boardType", "NEUTRO_SECO"] },
              { "eq": ["turnDynamic", "STATIC"] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Neutro seco estático: check con medias/SD/aire"
          }
        },
        {
          "id": "IP_T_NEU_SECO_DYNAMIC_AGGRESSOR",
          "priority": 42,
          "when": {
            "all": [
              { "eq": ["boardType", "NEUTRO_SECO"] },
              { "eq": ["turnDynamic", "AGGRESSOR"] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 50,
            "plan": "PRESSURE",
            "reason": "Neutro seco dinámico: atacar si favorece al agresor"
          }
        },
        {
          "id": "IP_T_NEU_SECO_DYNAMIC_DEFENDER",
          "priority": 43,
          "when": {
            "all": [
              { "eq": ["boardType", "NEUTRO_SECO"] },
              { "eq": ["turnDynamic", "DEFENDER"] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Neutro seco dinámico: pasar si favorece al defensor"
          }
        },

        {
          "id": "IP_T_NEU_COORD_STATIC_BET",
          "priority": 50,
          "when": {
            "all": [
              { "eq": ["boardType", "NEUTRO_COORD"] },
              { "eq": ["turnDynamic", "STATIC"] },
              { "eq": ["flopAction", "BET"] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "BARREL",
            "reason": "Neutro coordinado estático: seguir con lo que beteó flop"
          }
        },
        {
          "id": "IP_T_NEU_COORD_STATIC_CHECK",
          "priority": 51,
          "when": {
            "all": [
              { "eq": ["boardType", "NEUTRO_COORD"] },
              { "eq": ["turnDynamic", "STATIC"] },
              { "eq": ["flopAction", "CHECK"] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Neutro coordinado estático: mantener check con lo que chequeó flop"
          }
        },
        {
          "id": "IP_T_NEU_COORD_DYNAMIC_AGGRESSOR",
          "priority": 52,
          "when": {
            "all": [
              { "eq": ["boardType", "NEUTRO_COORD"] },
              { "eq": ["turnDynamic", "AGGRESSOR"] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "PRESSURE",
            "reason": "Neutro coordinado dinámico: atacar si favorece al agresor"
          }
        },
        {
          "id": "IP_T_NEU_COORD_DYNAMIC_DEFENDER",
          "priority": 53,
          "when": {
            "all": [
              { "eq": ["boardType", "NEUTRO_COORD"] },
              { "eq": ["turnDynamic", "DEFENDER"] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Neutro coordinado dinámico: pasar si favorece al defensor"
          }
        },

        {
          "id": "IP_T_MONO_VALUE",
          "priority": 60,
          "when": {
            "all": [
              { "eq": ["boardType", "MONOCOLOR"] },
              { "in": ["handTier", ["FUERTE", "MUY_FUERTE"]] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 50,
            "plan": "VALUE",
            "reason": "Monocolor turn: valor -> bet 50%"
          }
        },
        {
          "id": "IP_T_MONO_BLUFF_SEMI",
          "priority": 61,
          "when": {
            "all": [
              { "eq": ["boardType", "MONOCOLOR"] },
              {
                "any": [
                  { "gte": ["outs", 4] },
                  { "eq": ["handTier", "AIRE"] }
                ]
              }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "PRESSURE",
            "reason": "Monocolor turn: bluff/semi -> bet 75%"
          }
        },
        {
          "id": "IP_T_MONO_CHECK",
          "priority": 62,
          "when": { "eq": ["boardType", "MONOCOLOR"] },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Monocolor turn: check con valor devaluado / medias no vulnerables"
          }
        },

        {
          "id": "IP_T_PAIRED_FROM_33_STRONG_OR_SEMI",
          "priority": 82,
          "when": {
            "all": [
              {
                "in": [
                  "boardType",
                  ["PAREADO_OFENSIVO", "PAREADO_DEFENSIVO", "PAREADO_NEUTRO"]
                ]
              },
              { "eq": ["flopSize", 33] },
              {
                "any": [
                  { "in": ["handTier", ["MUY_FUERTE", "FUERTE"]] },
                  { "gte": ["outs", 4] }
                ]
              }
            ]
          },
          "do": {
            "action": "BET",
            "size": 50,
            "plan": "VALUE_OR_SEMI",
            "reason": "Pareado turn (flop 33%): bet 50% con fuerte o semifarol"
          }
        },
        {
          "id": "IP_T_PAIRED_FROM_33_CHECK",
          "priority": 83,
          "when": {
            "all": [
              {
                "in": [
                  "boardType",
                  ["PAREADO_OFENSIVO", "PAREADO_DEFENSIVO", "PAREADO_NEUTRO"]
                ]
              },
              { "eq": ["flopSize", 33] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Pareado turn (flop 33%): check cuando el valor no es muy fuerte"
          }
        },

        {
          "id": "IP_T_PAIRED_FROM_50_STRONG_OR_SEMI",
          "priority": 84,
          "when": {
            "all": [
              {
                "in": [
                  "boardType",
                  ["PAREADO_OFENSIVO", "PAREADO_DEFENSIVO", "PAREADO_NEUTRO"]
                ]
              },
              { "eq": ["flopSize", 50] },
              {
                "any": [
                  { "in": ["handTier", ["MUY_FUERTE", "FUERTE"]] },
                  { "gte": ["outs", 8] }
                ]
              }
            ]
          },
          "do": {
            "action": "BET",
            "size": 50,
            "plan": "VALUE_OR_SEMI",
            "reason": "Pareado turn (flop 50%): bet 50% con fuerte o semifarol 8+ outs"
          }
        },
        {
          "id": "IP_T_PAIRED_FROM_50_CHECK",
          "priority": 85,
          "when": {
            "all": [
              {
                "in": [
                  "boardType",
                  ["PAREADO_OFENSIVO", "PAREADO_DEFENSIVO", "PAREADO_NEUTRO"]
                ]
              },
              { "eq": ["flopSize", 50] }
            ]
          },
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Pareado turn (flop 50%): check cuando el valor no es muy fuerte"
          }
        },

        {
          "id": "IP_T_FALLBACK",
          "priority": 999,
          "when": {},
          "do": { "action": "CHECK", "plan": "CONTROL", "reason": "Fallback" }
        }
      ],

      "RIVER": [
        {
          "id": "IP_R_VALUE",
          "priority": 10,
          "when": { "in": ["handTier", ["MUY_FUERTE", "FUERTE"]] },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "VALUE",
            "reason": "River: bet por valor"
          }
        },
        {
          "id": "IP_R_SDV",
          "priority": 20,
          "when": { "eq": ["handTier", "MEDIA"] },
          "do": {
            "action": "CHECK",
            "plan": "SHOWDOWN",
            "reason": "River: showdown/control"
          }
        },
        {
          "id": "IP_R_BLUFF_BLOCKERS",
          "priority": 30,
          "when": {
            "all": [
              { "eq": ["handTier", "AIRE"] },
              { "eq": ["hasBlockersForBluff", true] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "BLUFF",
            "reason": "River: bluff con blockers"
          }
        },
        {
          "id": "IP_R_GIVEUP",
          "priority": 40,
          "when": { "eq": ["handTier", "AIRE"] },
          "do": {
            "action": "CHECK",
            "plan": "GIVEUP",
            "reason": "River: no bluff sin blockers"
          }
        }
      ]
    },

    "OOP": {
      "FLOP": [
        {
          "id": "OOP_F_MONSTER_XR",
          "priority": 10,
          "when": { "eq": ["handTier", "MUY_FUERTE"] },
          "do": {
            "action": "CHECK_RAISE",
            "size": null,
            "plan": "XR",
            "reason": "OOP: muy fuerte -> check con intención de XR"
          }
        },

        {
          "id": "OOP_F_STRONG_BET",
          "priority": 20,
          "when": { "eq": ["handTier", "FUERTE"] },
          "do": {
            "action": "BET",
            "size": 50,
            "plan": "VALUE",
            "reason": "OOP: mano fuerte -> bet por valor (bet/fold vs raise) (simplificado)"
          }
        },

        {
          "id": "OOP_F_MEDIA_XC",
          "priority": 30,
          "when": { "eq": ["handTier", "MEDIA"] },
          "do": {
            "action": "CHECK_CALL",
            "plan": "XC",
            "reason": "OOP: mano media/SD -> check/call (control)"
          }
        },

        {
          "id": "OOP_F_SEMI_XR_OUTS_LT6",
          "priority": 40,
          "when": {
            "all": [
              { "eq": ["handTier", "AIRE"] },
              { "gt": ["outs", 0] },
              { "lt": ["outs", 6] }
            ]
          },
          "do": {
            "action": "CHECK_RAISE",
            "size": null,
            "plan": "XR_SEMI",
            "reason": "OOP: semifarol <6 outs -> check/raise (según tabla)"
          }
        },
        {
          "id": "OOP_F_SEMI_BET_OUTS_6_9",
          "priority": 41,
          "when": {
            "all": [
              { "eq": ["handTier", "AIRE"] },
              { "gte": ["outs", 6] },
              { "lte": ["outs", 9] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 50,
            "plan": "SEMI_BLUFF",
            "reason": "OOP: semifarol 6-9 outs -> bet (según tabla)"
          }
        },
        {
          "id": "OOP_F_SEMI_XR_OUTS_GT9",
          "priority": 42,
          "when": {
            "all": [
              { "eq": ["handTier", "AIRE"] },
              { "gt": ["outs", 9] }
            ]
          },
          "do": {
            "action": "CHECK_RAISE",
            "size": null,
            "plan": "XR_SEMI",
            "reason": "OOP: semifarol >9 outs -> check/raise (según tabla)"
          }
        },

        {
          "id": "OOP_F_AIR_XF",
          "priority": 50,
          "when": { "eq": ["handTier", "AIRE"] },
          "do": {
            "action": "CHECK_FOLD",
            "plan": "XF",
            "reason": "OOP: aire sin equity -> check/fold"
          }
        },

        {
          "id": "OOP_F_FALLBACK",
          "priority": 999,
          "when": {},
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Fallback"
          }
        }
      ],

      "TURN": [
        {
          "id": "OOP_T_MONSTER",
          "priority": 10,
          "when": { "eq": ["handTier", "MUY_FUERTE"] },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "VALUE",
            "reason": "OOP: valor muy fuerte -> apostar grande"
          }
        },

        {
          "id": "OOP_T_FROM_XR_COMPLETED",
          "priority": 20,
          "when": {
            "all": [
              { "in": ["flopPlan", ["XR", "XR_SEMI"]] },
              { "eq": ["heroCompletedDraw", true] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 50,
            "plan": "FOLLOW_XR_VALUE",
            "reason": "OOP: venimos de XR y completamos -> value más controlado (50%)"
          }
        },
        {
          "id": "OOP_T_FROM_XR_NOT_COMPLETED_PRESSURE",
          "priority": 21,
          "when": {
            "all": [
              { "in": ["flopPlan", ["XR", "XR_SEMI"]] },
              { "eq": ["heroCompletedDraw", false] },
              { "eq": ["boardCompletedDraw", false] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "FOLLOW_XR_PRESSURE",
            "reason": "OOP: venimos de XR y no completamos, board no completa -> pot bet para presión (simplificado)"
          }
        },
        {
          "id": "OOP_T_FROM_XR_BOARD_COMPLETED_CONTROL",
          "priority": 22,
          "when": {
            "all": [
              { "in": ["flopPlan", ["XR", "XR_SEMI"]] },
              { "eq": ["boardCompletedDraw", true] }
            ]
          },
          "do": {
            "action": "CHECK_CALL",
            "plan": "FOLLOW_XR_CONTROL",
            "reason": "OOP: venimos de XR y el board completa -> control (no inflar)"
          }
        },

        {
          "id": "OOP_T_STRONG_CONTINUE_VALUE",
          "priority": 30,
          "when": { "eq": ["handTier", "FUERTE"] },
          "do": {
            "action": "BET",
            "size": 50,
            "plan": "VALUE_PROTECT",
            "reason": "OOP: mano fuerte -> continuar value/protección"
          }
        },

        {
          "id": "OOP_T_MEDIA",
          "priority": 40,
          "when": { "eq": ["handTier", "MEDIA"] },
          "do": {
            "action": "CHECK_CALL",
            "plan": "XC",
            "reason": "OOP: mano media -> check/call"
          }
        },

        {
          "id": "OOP_T_DYNAMIC_DEFENDER_AIR",
          "priority": 50,
          "when": {
            "all": [
              { "eq": ["turnDynamic", "DEFENDER"] },
              { "eq": ["handTier", "AIRE"] }
            ]
          },
          "do": {
            "action": "CHECK_FOLD",
            "plan": "XF",
            "reason": "OOP: turn malo + aire -> give up"
          }
        },

        {
          "id": "OOP_T_DYNAMIC_AGGRESSOR_BLUFF",
          "priority": 60,
          "when": {
            "all": [
              { "eq": ["turnDynamic", "AGGRESSOR"] },
              { "eq": ["handTier", "AIRE"] },
              { "eq": ["hasBlockersForBluff", true] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "BLUFF",
            "reason": "OOP: scary card + blockers -> bluff selectivo"
          }
        },

        {
          "id": "OOP_T_DRAW_SEMI",
          "priority": 70,
          "when": { "gte": ["outs", 8] },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "SEMI_BLUFF",
            "reason": "OOP: semifarol fuerte (8+ outs)"
          }
        },

        {
          "id": "OOP_T_BOARD_COMPLETED",
          "priority": 80,
          "when": { "eq": ["boardCompletedDraw", true] },
          "do": {
            "action": "CHECK_CALL",
            "plan": "CONTROL",
            "reason": "OOP: se completa draw del board -> control (no inflar)"
          }
        },

        {
          "id": "OOP_T_FALLBACK",
          "priority": 999,
          "when": {},
          "do": {
            "action": "CHECK",
            "plan": "CONTROL",
            "reason": "Fallback"
          }
        }
      ],

      "RIVER": [
        {
          "id": "OOP_R_VALUE",
          "priority": 10,
          "when": { "in": ["handTier", ["MUY_FUERTE", "FUERTE"]] },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "VALUE",
            "reason": "OOP river: valor"
          }
        },
        {
          "id": "OOP_R_MEDIA",
          "priority": 20,
          "when": { "eq": ["handTier", "MEDIA"] },
          "do": {
            "action": "CHECK_CALL",
            "plan": "XC_SMALL",
            "reason": "OOP river: SD -> check/call chico, fold vs grande (simplificado)"
          }
        },
        {
          "id": "OOP_R_BLUFF",
          "priority": 30,
          "when": {
            "all": [
              { "eq": ["handTier", "AIRE"] },
              { "eq": ["hasBlockersForBluff", true] }
            ]
          },
          "do": {
            "action": "BET",
            "size": 75,
            "plan": "BLUFF",
            "reason": "OOP river: bluff selectivo con blockers"
          }
        },
        {
          "id": "OOP_R_GIVEUP",
          "priority": 40,
          "when": { "eq": ["handTier", "AIRE"] },
          "do": {
            "action": "CHECK",
            "plan": "GIVEUP",
            "reason": "OOP river: give up"
          }
        }
      ]
    }
  }
}
